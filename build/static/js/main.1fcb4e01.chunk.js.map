{"version":3,"sources":["../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","hook/fetch.ts","constant.ts","utils/http.ts","utils/math.ts","pages/WatersystemPage/WatersystemPage.tsx","store/actions/auth.ts","pages/LandingPage/LandingPage.tsx","pages/SignupPage/SignupPage.tsx","pages/HomePage/HomePage.tsx","components/ButtonImage/ButtonImage.tsx","components/TimeAgo/TimeAgo.tsx","App.tsx","serviceWorker.ts","store/reducers/auth.ts","store/index.ts","index.tsx","assets/images/icons/waterdrop.svg","assets/images/icons/fertilizer.svg","assets/images/icons/moisture.svg"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","HttpState","BASE_URL","fetchData","uri","httpConfig","a","fetch","response","json","secOfDay2String","sod","hour","Math","floor","minute","toString","padStart","isValidSchedule","schedule","selectedTime","isValid","i","ScheduleTable","style","display","className","flex","index","key","WatersystemPage","useState","showAlert1","setShowAlert1","showAlert2","setShowAlert2","isAuto","setIsAuto","pumpStatus","setPumpStatus","loading","setLoading","setTo","setSetTo","setSchedule","Date","toISOString","selectedStartDate","setSelectedStartDate","selectedEndDate","setSelectedEndDate","userData","useSelector","state","auth","useEffect","openSocket","on","device_alias","mes","_messageArray","message","split","_isAuto","_fetchSchedule","useCallback","headers","token","console","log","_finalSchedule","_schedule","isEnd","push","onToggleMode","onAddScheduleHandler","_startTime","_endTime","_startTimeSOD","getHours","getMinutes","_endTimeSOD","_updateSchedule","updatedSchedule","sort","b","requestSchedule","method","body","JSON","stringify","controlHandler","control","onDeleteScheduleHandler","color","slot","isOpen","onDidDismiss","duration","header","buttons","opacity","isAutoLabelStatusBuilder","checked","onClick","size","class","pumpLabelStatusBuilder","icon","trash","displayFormat","value","onIonChange","detail","add","authSuccess","email","name","role","username","type","login","password","dispatch","expirationDate","getTime","expiresIn","localStorage","setItem","logOut","removeItem","initialState","httpStatus","UNDETERMINE","httpReducer","action","WAITING","SUCCESS","ERROR","useFetch","useReducer","httpState","dispatchHttp","useDispatch","dispatchAction","results","LandingPage","history","setUsername","setPassword","signupHandler","preventDefault","loginHandler","authAction","replace","placeholder","flexDirection","justifyContent","fill","ValidateEmail","mail","test","alert","Signup","DeviceStatus","setName","setEmail","deviceAlias","setDeviceAlias","signUpHandler","goBack","ButtonImage","img","title","disable","alignItems","src","TimeAgo","date","secAgo","setSecAgo","round","now","interval","setInterval","clearInterval","Homepage","deviceStatus","setDeviceStatus","lastMessage","setLastMessage","socket","OFFLINE","TOOLONG","ONLINE","authActions","statusColor","statusBuilder","sizeMd","sizeLg","Waterdrop","Fertilizer","Moisture","AuthRoute","path","component","Landing","App","getItem","exact","render","to","Boolean","window","location","hostname","match","error","reducers","combineReducers","err","createStore","applyMiddleware","ReduxThunk","ReactDOM","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qGAAA,IAAIA,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B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","file":"static/js/main.1fcb4e01.chunk.js","sourcesContent":["var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t173,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t174,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t175,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t176,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t177,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t178,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t179,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t180,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t181,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t182,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t183,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t184,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t185,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t186,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t187,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t188,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t189,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t190,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t191,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t192,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t193,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t194,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t195,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t196,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t197,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t198,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t199,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t200,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t201,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t202,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t203,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t204,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t205,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t206,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t207,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t208,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t209,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t210,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t211,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t212,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t213,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t214,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t215,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 103;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t219,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 124;\nmodule.exports = webpackAsyncContext;","import  { useReducer, useCallback } from \"react\";\n\nimport { useDispatch } from \"react-redux\";\n\n\nexport enum HttpState {\n  UNDETERMINE,\n  WAITING,\n  SUCCESS,\n  ERROR\n}\ninterface FetchState {\n  httpStatus:HttpState;\n}\ninterface FetchAction {\n  type:\"SEND\"|\"RESPONSE\"|\"ERROR\"|\"CLEAR\"\n}\n\nconst initialState:FetchState = {\n  httpStatus: HttpState.UNDETERMINE,\n};\n\n\nconst httpReducer = (state= initialState, action:FetchAction) :FetchState => {\n  switch (action.type) {\n    case \"SEND\":\n      return {\n        httpStatus:HttpState.WAITING,\n      };\n    case \"RESPONSE\":\n      return {\n      httpStatus:HttpState.SUCCESS,\n      };\n    case \"ERROR\":\n      return { httpStatus:HttpState.ERROR };\n    case \"CLEAR\":\n      return initialState;\n    default:\n      throw new Error(\"Should not be reached!\");\n  }\n};\n\nexport const useFetch = () => {\n  const [httpState, dispatchHttp] = useReducer(httpReducer, initialState);\n  const dispatch = useDispatch();\n\n  const fetchData = useCallback(\n    async (dispatchAction) => {\n      dispatchHttp({ type: \"SEND\" });\n\n      try {\n        const results = await dispatch(dispatchAction);\n        dispatchHttp({ type: \"RESPONSE\" });\n      \n        return results;\n      \n\n      } catch (e) {\n        dispatchHttp({ type: \"ERROR\" });\n      }\n    },\n    [dispatchHttp,dispatch]\n  );\n\n  return {\n    httpState: httpState.httpStatus,\n    dispatch: fetchData,\n  };\n};\n\nexport default useFetch;\n","export const BASE_URL = \"http://app.farmmechatronic.org\"","import {BASE_URL} from '../constant';\nexport const fetchWithAuth = () => {};\n\nexport const fetchData = async (uri: string, httpConfig?: RequestInit) => {\n  const response = await fetch(BASE_URL + uri,httpConfig);\n\n  return await response.json();\n};\n","export const secOfDay2String = (sod:number)=>{\n    const hour = Math.floor((sod/3600));\n    const minute = Math.floor((sod%3600)/60);\n    return hour.toString().padStart(2,'0') + \":\" +minute.toString().padStart(2,'0');\n}\n\n\nexport const isValidSchedule = (schedule:number[][],selectedTime:number[])=>{\n    let isValid = true;\n    for(let i of schedule){\n        if(i[0]<=selectedTime[0] && i[1]>=selectedTime[0]){\n            isValid = isValid&&false\n        }\n        if(i[0]<=selectedTime[1]&&i[1]>=selectedTime[1]){\n            isValid = isValid&&false\n        }\n    } \n    \n    if(selectedTime[0]>=selectedTime[1]){\n        isValid = isValid&&false\n    }\n    return isValid;\n}","import { IonAlert, IonBackButton, IonButton, IonButtons, IonCard, IonCardContent, IonChip, IonCol, IonContent, IonDatetime, IonGrid, IonHeader, IonIcon, IonItem, IonItemDivider, IonLabel, IonLoading, IonPage, IonRow, IonSpinner, IonTitle, IonToggle, IonToolbar } from '@ionic/react';\nimport React, { useEffect, useState, useCallback } from 'react'\nimport { useSelector } from 'react-redux';\n\nimport openSocket from 'socket.io-client'\nimport { BASE_URL } from '../../constant'\nimport { RootState } from '../../store';\nimport { fetchData } from '../../utils/http';\nimport { isValidSchedule, secOfDay2String } from '../../utils/math';\n\nimport { add, trash } from 'ionicons/icons'\nconst WatersystemPage: React.FC = () => {\n    const [showAlert1, setShowAlert1] = useState(false);\n    const [showAlert2, setShowAlert2] = useState(false);\n    const [isAuto, setIsAuto] = useState<boolean | null>(null);\n    const [pumpStatus, setPumpStatus] = useState<string | null>(null);\n    const [loading, setLoading] = useState<boolean>(false);\n    const [setTo, setSetTo] = useState<boolean | null>(null);\n\n    const [schedule, setSchedule] = useState<number[][]>([])\n\n    const [selectedStartDate, setSelectedStartDate] = useState<string>(new Date().toISOString());\n    const [selectedEndDate, setSelectedEndDate] = useState<string>(new Date().toISOString());\n    const userData = useSelector((state: RootState) => state.auth)\n    useEffect(() => {\n        const socket = openSocket(BASE_URL);\n\n        socket.on(userData.device_alias + \"_data\", (mes: { message: string }) => {\n            // const messageJSON = JSON.parse(mes);\n            const _messageArray = mes.message.split(',');\n            const _isAuto = _messageArray[0] === \"1\"\n            setIsAuto(_isAuto)\n            setPumpStatus(_messageArray[1])\n            if (setTo === null) {\n                return;\n            }\n            if (loading) {\n                if (_isAuto === setTo) {\n                    setLoading(false)\n                }\n            }\n\n        })\n\n\n    }, [userData, setTo, loading])\n\n\n\n    const _fetchSchedule = useCallback(() => {\n        fetchData(\"/user/schedule\", {\n            headers: {\n                'Authorization': \"Bearer \" + userData.token\n            }\n        }).then((response) => {\n            console.log(response);\n\n            if (response.schedule[0] === 0 && response.schedule[1] === 0) {\n\n                setSchedule([]);\n            }\n            else {\n                const _finalSchedule = [];\n\n                let _schedule = [];\n                let isEnd = false;\n                for (let i of response.schedule) {\n                    if (isEnd) {\n                        _schedule.push(i);\n                        _finalSchedule.push(_schedule);\n                        _schedule = [];\n                    }\n                    else {\n                        _schedule.push(i);\n                    }\n                    isEnd = !isEnd;\n                }\n                setSchedule(_finalSchedule)\n\n            }\n\n        })\n    }\n        , [userData.token])\n\n    useEffect(() => {\n        if (!userData.token) {\n            return\n        }\n        _fetchSchedule();\n\n    }, [userData.token, _fetchSchedule])\n    const isAutoLabelStatusBuilder = () => {\n        switch (isAuto) {\n            case null:\n                return <IonChip color=\"success\" style={{ opacity: 0 }}>\n                    <IonLabel>กำลังทำงาน...</IonLabel>\n                </IonChip>\n            case true:\n                return <IonChip color=\"success\">\n                    <IonLabel >AUTO</IonLabel>\n                </IonChip>\n            case false:\n                return <IonChip color=\"tertiary\">\n                    <IonLabel >MANAUL</IonLabel>\n                </IonChip>\n            default:\n                break;\n        }\n    }\n\n    const pumpLabelStatusBuilder = () => {\n        switch (pumpStatus) {\n            case null:\n                return <IonChip color=\"success\" style={{ opacity: 0 }}>\n                    <IonLabel>กำลังทำงาน...</IonLabel>\n                </IonChip>\n            case \"1\":\n                return <IonChip color=\"success\">\n                    <IonLabel>กำลังทำงาน...</IonLabel>\n                </IonChip>\n            case \"0\":\n                return <IonChip color=\"medium\">\n                    <IonLabel>ไม่ทำงาน</IonLabel>\n                </IonChip>\n            default:\n                break;\n        }\n    }\n\n\n\n    const onToggleMode = async () => {\n\n        setLoading(true);\n        await fetchData(\"/user/auto/\" + (!isAuto ? \"1\" : \"0\"), {\n            headers: {\n                'Authorization': \"Bearer \" + userData.token\n            }\n        })\n\n        setSetTo(!isAuto)\n\n    }\n\n    const onAddScheduleHandler = async () => {\n        const _startTime = new Date(selectedStartDate);\n        const _endTime = new Date(selectedEndDate)\n\n        const _startTimeSOD = _startTime.getHours() * 3600 + _startTime.getMinutes() * 60\n        const _endTimeSOD = _endTime.getHours() * 3600 + _endTime.getMinutes() * 60\n\n        const _updateSchedule = [_startTimeSOD, _endTimeSOD]\n\n        if (!isValidSchedule(schedule, _updateSchedule)) {\n            setShowAlert2(true)\n            return\n        }\n\n        const updatedSchedule = [...schedule]\n        updatedSchedule.push(_updateSchedule);\n        updatedSchedule.sort((a, b) => a[0] - b[0])\n\n        const requestSchedule = [];\n        for (let i of updatedSchedule) {\n            requestSchedule.push(i[0])\n            requestSchedule.push(i[1])\n        }\n        console.log(requestSchedule);\n \n        fetchData(\"/user/schedule\", {\n            method: \"POST\",\n            headers: {\n                'Authorization': \"Bearer \" + userData.token,\n                'Content-Type': \"application/json\"\n            },\n            body: JSON.stringify(\n                {\n                    schedule: requestSchedule\n                }\n            )\n        })\n\n        setSchedule(updatedSchedule);\n    }\n\n    const controlHandler = async (control:number)=>{\n        await fetchData(\"/user/manual/\" + control, {\n            headers: {\n                'Authorization': \"Bearer \" + userData.token\n            }\n        })\n        \n    }\n\n    const onDeleteScheduleHandler =async ()=> {\n         fetchData(\"/user/schedule\", {\n            method: \"POST\",\n            headers: {\n                'Authorization': \"Bearer \" + userData.token,\n                'Content-Type': \"application/json\"\n            },\n            body: JSON.stringify(\n                {\n                    schedule: [0,0]\n                }\n            )\n        })\n\n        setSchedule([]);\n\n    }\n    console.log(schedule);\n    \n\n\n    return <IonPage>\n        <IonHeader >\n            <IonToolbar color=\"primary\">\n                <IonButtons slot=\"start\">\n                    <IonBackButton />\n                </IonButtons>\n                <IonTitle>ระบบน้ำ</IonTitle>\n            </IonToolbar>\n        </IonHeader>\n        <IonContent>\n            <IonLoading\n\n                isOpen={loading}\n                onDidDismiss={() => {\n                    setLoading(false);\n                    if (setTo !== isAuto) {\n                        setShowAlert1(true);\n                    }\n                }}\n                message={'กำลังเชื่อมต่อเซิฟเวอร์...'}\n                duration={20000}\n            />\n            <IonAlert\n                isOpen={showAlert1}\n                onDidDismiss={() => setShowAlert1(false)}\n                header={'ผิดพลาด'}\n                message={'การส่งข้อมูลล่าช้า'}\n                buttons={['ตกลง']}\n            />\n            <IonAlert\n                isOpen={showAlert2}\n                onDidDismiss={() => setShowAlert2(false)}\n                header={'ผิดพลาด'}\n                message={'โปรดตรวจสอบช่วงเวลา'}\n                buttons={['ตกลง']}\n            />\n\n            <IonGrid>\n                <IonRow>\n                    <IonCol>\n                        <IonCard>\n                            <IonCardContent>\n                                <IonItemDivider>Device Alias : {userData.device_alias}</IonItemDivider>\n                                <IonItem>\n                                    <IonLabel>โหมด :\n                                        {isAutoLabelStatusBuilder()}\n                                    </IonLabel>\n                                    {isAuto === null ? <IonSpinner /> : <IonToggle checked={isAuto} onClick={onToggleMode} />}\n                                </IonItem>\n                                {isAuto === false? <IonItem className=\"ion-text-end\">\n                                    <IonButton color=\"primary\" size=\"default\" onClick={()=>controlHandler(1)}>เปิดปั้ม</IonButton>\n                                    <IonButton color=\"medium\" size=\"default\"  onClick={()=>controlHandler(0)}> ปิดปั้ม</IonButton>\n                                </IonItem>:null}\n                                <IonItem class=\"ion-margin-bottom\" >\n                                    <IonLabel>ปั้ม :\n                                        {pumpLabelStatusBuilder()}\n                                    </IonLabel>\n                                </IonItem>\n                                <IonItemDivider>ตารางการทำงานอัตโนมัติ</IonItemDivider>\n                                <ScheduleTable schedule={schedule}></ScheduleTable>\n\n                                <div className=\"ion-text-end ion-margin-top\" onClick={onDeleteScheduleHandler}>\n                                    <IonButton size=\"small\" color=\"medium\">\n                                        <IonIcon slot=\"icon-only\" icon={trash} />\n                                    </IonButton>\n                                </div>\n\n\n                                <IonItemDivider className=\"ion-margin-top\">เพิ่มเวลาการทำงาน</IonItemDivider>\n                                <div className=\"ion-text-end ion-margin-top\">\n                                    <IonItem>\n                                        <IonLabel>เวลาเริ่มทำงาน</IonLabel>\n                                        <IonDatetime displayFormat=\"HH:mm\" value={selectedStartDate} onIonChange={e => setSelectedStartDate(e.detail.value!)}></IonDatetime>\n                                    </IonItem>\n                                    <IonItem>\n                                        <IonLabel>เวลาหยุดทำงาน</IonLabel>\n                                        <IonDatetime displayFormat=\"HH:mm\" value={selectedEndDate} onIonChange={e => setSelectedEndDate(e.detail.value!)}></IonDatetime>\n                                    </IonItem>\n                                    <IonButton className=\"ion-margin-top\" onClick={onAddScheduleHandler}>\n                                        <IonIcon slot=\"start\" icon={add} />\n                                    เพิ่ม\n\n                                </IonButton>\n\n\n                                </div>\n                            </IonCardContent>\n                        </IonCard>\n                    </IonCol>\n\n                </IonRow>\n\n            </IonGrid>\n        </IonContent>\n    </IonPage>\n}\n\ninterface ScheduleTableProps {\n    schedule: number[][]\n}\n\nconst ScheduleTable: React.FC<ScheduleTableProps> = ({ schedule }) => {\n\n\n\n    return <div>\n        <div style={{ display: \"flex\" }} className=\"ion-text-center ion-margin-top\">\n            <div style={{ flex: 1 }}>\n                <h2>เริ่มทำงาน</h2>\n            </div>\n            <div style={{ flex: 1 }}>\n                <h2>หยุดทำงาน</h2>\n            </div>\n        </div>\n        <div>\n            {schedule.map((i, index) => {\n                return <div style={{ display: \"flex\" }} key={index} className=\"ion-text-center ion-margin-top\">\n                    <div style={{ flex: 1 }}>\n                        <h1>{secOfDay2String(i[0])}</h1>\n                    </div>\n                    <div style={{ flex: 1 }}>\n                        <h1>{secOfDay2String(i[1])}</h1>\n                    </div>\n                </div>\n            })}\n        </div>\n    </div>\n}\n\nexport default WatersystemPage;","import { fetchData } from '../../utils/http';\n\n\nexport const LOGOUT = 'LOGOUT';\nexport const SIGN_UP = 'SIGN_UP';\nexport const AUTH_FAIL = 'AUTH_FAIL';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\n\nexport const authSuccess = (\n  token: string,\n  email:string,\n  device_alias:string,\n  name:string,\n  role:string,\n  username:string,\n\n  ) => {\n  return {\n    type: AUTH_SUCCESS,\n    token: token,\n        email:email,\n        device_alias:device_alias,\n        name:name,\n        role:role,\n        username:username,\n  };\n};\n\nexport const authFail= (err: object) => {\n  return {\n    type: AUTH_FAIL,\n    err:err\n  };\n};\n\nexport const login = (username: string, password: string) => {\n  return async (dispatch: Function) => {\n    try{\n      const response = await fetchData('/user/login', {\n        method: 'POST',\n        headers:{\n          'Content-Type':\"application/json\"\n        },\n        body: JSON.stringify(\n          {\n            username,\n            password,\n          }\n        )\n      });\n  \n      console.log(response);\n  \n      const expirationDate = new Date(\n        new Date().getTime() + response.expiresIn * 1000,\n      );\n \n      \n      localStorage.setItem('token', response.token);\n      localStorage.setItem('expirationDate', expirationDate.toString());\n      localStorage.setItem('email', response.email);\n      localStorage.setItem('device_alias', response.device_alias);\n      localStorage.setItem('name', response.name);\n      localStorage.setItem('role', response.role);\n      localStorage.setItem('username', response.username);\n      dispatch(authSuccess(response.token,response.email,response.device_alias,response.name,response.role,response.username));\n   \n      return response;\n\n    }\n    catch(err){\n      console.log(err);\n      throw err;\n    }\n   \n  };\n};\n\nexport const signUp = (data: object) => {\n  return async (dispatch: Function) => {\n    const response = await fetchData('/auth/register', {\n      method: 'POST',\n      headers:{\n        'Content-Type':\"application/json\"\n      },\n      body: JSON.stringify(\n        data\n      )\n    });\n    console.log(response);\n  };\n};\n\nexport const logOut = ()=>{\n  localStorage.removeItem(\"token\")\n  localStorage.removeItem(\"expirationDate\")\n  localStorage.removeItem(\"email\")\n  localStorage.removeItem(\"device_alias\")\n  localStorage.removeItem(\"name\")\n  localStorage.removeItem(\"role\")\n  localStorage.removeItem(\"username\")\n\n  return {\n    type: LOGOUT\n  };\n}\n\n\n\nexport const checkAuthState = ()=>{\n  return (dispatch:Function) =>{\n    const token = localStorage.getItem(\"token\")\n    console.log(\"token\",token);\n    \n    if(!token){\n      dispatch(logOut());\n    }\n    else{\n      const expirationDate = new Date(localStorage.getItem(\"expirationDate\")!! );\n      if(expirationDate<new Date()){\n        dispatch(logOut())\n      }else{\n        const email =localStorage.getItem(\"email\")!!;\n        const device_alias = localStorage.getItem(\"device_alias\")!!;\n        const name = localStorage.getItem(\"name\")!!;\n        const role = localStorage.getItem(\"role\")!!;\n        const username = localStorage.getItem(\"username\")!!;\n        dispatch(authSuccess(token,email,device_alias,name,role,username));\n      }\n    }\n  }\n}","import { IonButton, IonCard, IonCardContent, IonCol, IonContent, IonGrid, IonHeader, IonInput, IonItem, IonLoading, IonPage, IonRow, IonTitle, IonToolbar } from '@ionic/react';\nimport React, { useCallback, useState } from 'react'\nimport { RouteComponentProps } from 'react-router-dom';\nimport './LandingPage.css';\n\nimport * as authAction from '../../store/actions/auth'\n\n\n\nimport { useFetch, HttpState } from '../../hook/fetch'\n\ninterface LandingPageProps extends RouteComponentProps<any> {\n\n}\n\nconst LandingPage: React.FC<LandingPageProps> = ({ history }) => {\n    const { dispatch, httpState } = useFetch();\n    const [username, setUsername] = useState<string | null | undefined>(\"\");\n    const [password, setPassword] = useState<string | null | undefined>(\"\");\n\n    \n    const signupHandler = useCallback(\n        (e: React.MouseEvent<HTMLIonButtonElement, MouseEvent>) => {\n            e.preventDefault();\n            history.push(\"/signup\")\n        },\n        [history],\n    )\n    const loginHandler = useCallback(\n        async (e: React.MouseEvent<HTMLIonButtonElement, MouseEvent>) => {\n            e.preventDefault();\n            setUsername(\"\");\n            setPassword(\"\")\n            const results = await dispatch(authAction.login(username ? username : \"\", password ? password : \"\"));\n            if(results.message===\"Login Successful\"){\n                history.replace(\"/home\")\n            }\n        },\n        [dispatch, username, password,history],\n    )\n\n    return (<IonPage>\n        <IonContent>\n            <IonHeader >\n                <IonToolbar color=\"primary\">\n                    <IonTitle>AMM</IonTitle>\n                </IonToolbar>\n            </IonHeader>\n            <IonCard>\n\n                <IonCardContent>\n                    <IonLoading\n                     \n                        isOpen={httpState===HttpState.WAITING}\n                        onDidDismiss={() => {\n                        \n                        }}\n                        message={'กำลังเชื่อมต่อเซิฟเวอร์...'}\n                        duration={5000}\n                    />\n                    <IonGrid>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"ชื่อผู้ใช้\"\n                                        type=\"text\"\n                                        value={username}\n                                        onIonChange={e => setUsername(e.detail.value)}></IonInput>\n                                </IonItem>\n                            </IonCol>\n\n                        </IonRow>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"รหัสผ่าน\"\n                                        type=\"password\"\n                                        value={password}\n                                        onIonChange={e => setPassword(e.detail.value)}></IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow class=\"ion-justify-content-center ion-margin-top\">\n                            <IonCol className=\"ion-text-center ion-no-padding\">\n                                <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\" }}>\n                                    <IonButton color=\"primary\" className=\"ion-no-margin\" onClick={loginHandler}>ลงชื่อเข้าใช้</IonButton>\n                                    <IonButton fill=\"clear\" color=\"medium\" className=\"ion-no-margin\" onClick={signupHandler}>ลงทะเบียน</IonButton>\n                                </div>\n                            </IonCol>\n\n                        </IonRow>\n                    </IonGrid>\n\n                </IonCardContent>\n            </IonCard>\n        </IonContent>\n    </IonPage>)\n}\n\n\nexport default LandingPage;","import { IonAlert, IonBackButton, IonButton, IonButtons, IonCard, IonCardContent, IonCol, IonContent, IonGrid, IonHeader, IonInput, IonItem, IonPage, IonRow, IonTitle, IonToolbar } from '@ionic/react'\nimport React, { useState } from 'react'\nimport { RouteComponentProps } from 'react-router';\nimport { fetchData } from '../../utils/http';\n\nimport './SignupPage.css'\ninterface LandingPageProps extends RouteComponentProps<any> {\n\n}\nconst Signup: React.FC<LandingPageProps> = ({history}) => {\n    const [showAlert1, setShowAlert1] = useState(false);\n\n    const [username, setUsername] = useState<string>(\"\");\n    const [password, setPassword] = useState<string >(\"\");\n\n    const [name, setName] = useState<string >(\"\");\n    const [email, setEmail] = useState<string  >(\"\");\n    const [deviceAlias, setDeviceAlias] = useState<string >(\"\");\n\n    const signUpHandler = async () => {\n        let isValid = true;\n        if (!username || !password || !name || !email || !deviceAlias) {\n            isValid = isValid && false\n        }\n        if(!ValidateEmail(email)){\n            isValid = isValid && false\n        }\n        if (!isValid) {\n            setShowAlert1(true)\n            return\n        }\n        try {\n            const response = await fetchData(\"/user/registor\",{\n                method:\"POST\",\n                headers:{\n                    'Content-Type':\"application/json\"\n                },\n                body:JSON.stringify({\n                    username:username,\n                    password:password,\n                    name:name,\n                    role:\"standart\",\n                    email:email,\n                    device_alias:deviceAlias\n                })\n            })   \n            if(!response.message){\n                history.goBack();\n            }\n            \n        } catch (error) {\n            console.log(error);\n\n        }\n       \n        \n    }\n    return <IonPage>\n        <IonHeader >\n            <IonToolbar color=\"primary\">\n                <IonButtons slot=\"start\">\n                    <IonBackButton />\n                </IonButtons>\n                <IonTitle>ลงทะเบียน</IonTitle>\n            </IonToolbar>\n        </IonHeader>\n        <IonContent>\n            <IonAlert\n                isOpen={showAlert1}\n                onDidDismiss={() => setShowAlert1(false)}\n                header={'ผิดพลาด'}\n                message={'โปรดตรวจสอบข้อมูล'}\n                buttons={['ตกลง']}\n            />\n            <IonCard>\n                <IonCardContent>\n                    <IonGrid>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"ชื่อจริง-นามสกุล\"\n                                        type=\"text\"\n                                        value={name}\n                                        onIonChange={e => setName(e.detail.value!!)}>\n                                    </IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"Username\"\n                                        type=\"text\"\n                                        value={username}\n                                        onIonChange={e => setUsername(e.detail.value!!)}\n                                    ></IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"Password\"\n                                        type=\"password\"\n                                        value={password}\n                                        onIonChange={e => setPassword(e.detail.value!!)}\n                                    ></IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"Email\"\n                                        type=\"text\"\n                                        value={email}\n                                        onIonChange={e => setEmail(e.detail.value!!)}\n                                    ></IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow>\n                            <IonCol>\n                                <IonItem>\n                                    <IonInput placeholder=\"Device Alias\"\n                                        type=\"text\"\n                                        value={deviceAlias}\n                                        onIonChange={e => setDeviceAlias(e.detail.value!!)}\n                                    ></IonInput>\n                                </IonItem>\n                            </IonCol>\n                        </IonRow>\n                        <IonRow class=\"ion-justify-content-center ion-margin-top\">\n                            <IonCol className=\"ion-text-center ion-no-padding\">\n                                <div style={{ display: \"flex\", flexDirection: \"row\", justifyContent: \"center\" }}>\n\n                                    <IonButton className=\"ion-no-margin\" onClick={signUpHandler} >ลงทะเบียน</IonButton>\n                                </div>\n                            </IonCol>\n\n                        </IonRow>\n                    </IonGrid>\n                </IonCardContent>\n            </IonCard>\n\n        </IonContent>\n    </IonPage>\n}\n\nfunction ValidateEmail(mail:string) \n{\n if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail))\n  {\n    return (true)\n  }\n    alert(\"You have entered an invalid email address!\")\n    return (false)\n}\n\nexport default Signup","import { IonBackButton, IonButton, IonButtons, IonCard, IonCardContent, IonCol, IonContent, IonGrid, IonHeader, IonIcon, IonPage, IonRow, IonSpinner, IonTitle, IonToolbar } from '@ionic/react';\nimport React, { useEffect, useState } from 'react'\nimport Waterdrop from '../../assets/images/icons/waterdrop.svg'\nimport Fertilizer from '../../assets/images/icons/fertilizer.svg'\nimport Moisture from '../../assets/images/icons/moisture.svg'\nimport ButtonImage from '../../components/ButtonImage/ButtonImage';\nimport { logOut } from 'ionicons/icons'\n\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport * as authActions from '../../store/actions/auth'\nimport { RouteComponentProps } from 'react-router';\n\nimport openSocket from 'socket.io-client'\nimport { BASE_URL } from '../../constant';\nimport { RootState } from '../../store';\n\n\nimport TimeAgo from '../../components/TimeAgo/TimeAgo'\n\n\n\n\n\n\n\n\n\ninterface HomepageProps extends RouteComponentProps<any> {\n\n}\nenum DeviceStatus {\n    WAITING,\n    TOOLONG,\n    ONLINE,\n    OFFLINE\n}\nconst DEVICE_TOO_LONG = 10\nconst DEVICE_TIMEOUT = 20\nconst Homepage: React.FC<HomepageProps> = ({ history }) => {\n    const userData = useSelector((state: RootState) => state.auth)\n    const [deviceStatus, setDeviceStatus] = useState(DeviceStatus.WAITING);\n    const [lastMessage, setLastMessage] = useState<Date | null>(null);\n    const dispatch = useDispatch();\n    const logoutHandler = () => {\n        dispatch(authActions.logOut())\n        history.replace(\"/\")\n    }\n  \n    useEffect(() => {\n        const socket = openSocket(BASE_URL);\n        console.log(userData.device_alias + \"_status\");\n        socket.on(userData.device_alias + \"_status\", (mes: string) => {\n            setLastMessage(new Date());\n        })\n\n    }, [userData])\n\n    useEffect(() => {\n        let index = 0\n        const interval = setInterval(() => {\n            if (lastMessage === null) {\n                index++;\n                if (index >= DEVICE_TIMEOUT) {\n                    setDeviceStatus(DeviceStatus.OFFLINE)\n                }\n                else if (index >= DEVICE_TOO_LONG) {\n                    setDeviceStatus(DeviceStatus.TOOLONG)\n                }\n\n            }\n            else {\n                \n                if ((Date.now()-lastMessage.getTime())/1000 >= DEVICE_TIMEOUT) {\n                    setDeviceStatus(DeviceStatus.OFFLINE)\n                }\n                else if ((Date.now()-lastMessage.getTime() )/1000>= DEVICE_TOO_LONG) {\n                    setDeviceStatus(DeviceStatus.TOOLONG)\n                }\n                else {\n                    setDeviceStatus(DeviceStatus.ONLINE)\n                }\n            }\n        }, 1000)\n\n        return () => {\n            clearInterval(interval)\n        }\n    }, [lastMessage])\n\n    let statusBuilder = () => {\n        switch (deviceStatus) {\n            case DeviceStatus.WAITING:\n                return <IonSpinner />\n            case DeviceStatus.TOOLONG:\n                return <h1><b>TOO LONG</b></h1> \n            case DeviceStatus.OFFLINE:\n                return <h1><b>OFFLINE</b></h1>\n            case DeviceStatus.ONLINE:\n                return <h1><b>ONLINE</b></h1>\n            default:\n                break;\n        }\n    }\n\n\n    const statusColor = ()=>{\n        switch (deviceStatus) {\n            case DeviceStatus.WAITING:\n                return \"\"\n            case DeviceStatus.TOOLONG:\n                return \"warning\"\n            case DeviceStatus.OFFLINE:\n                return \"danger\"\n            case DeviceStatus.ONLINE:\n                return \"success\"\n            default:\n                break;\n        }\n    }\n\n    const waterSystemHandler = ()=>{\n        history.push(\"/watersystem\");\n    }\n\n    return <IonPage>\n        <IonHeader >\n            <IonToolbar color=\"primary\">\n                <IonButtons slot=\"start\">\n                    <IonBackButton />\n                </IonButtons>\n                <IonTitle>หน้าหลัก</IonTitle>\n                <IonButtons slot=\"end\">\n                    <IonButton onClick={logoutHandler}>\n                        <IonIcon slot=\"icon-only\" icon={logOut} />\n                    </IonButton>\n                </IonButtons>\n            </IonToolbar>\n        </IonHeader>\n        <IonContent>\n            <IonGrid>\n                <IonRow>\n                    <IonCol size=\"12\">\n                        <IonCard color={statusColor()} >\n                            <IonCardContent>\n                                <h1>Device Alias: <b>{userData.device_alias}</b></h1>\n                                <div style={{display:\"flex\"}}> <h1>Status: </h1> {statusBuilder()}</div> \n                                {lastMessage ? <TimeAgo date={lastMessage}></TimeAgo> : <p>ข้อความล่าสุด: - วินาทีที่แล้ว</p>}\n                            </IonCardContent>\n                        </IonCard>\n                    </IonCol>\n                </IonRow>\n                <IonRow>\n                    <IonCol size=\"12\" sizeMd=\"6\" sizeLg=\"4\" className=\"ion-text-center\">\n                        <IonCard>\n                            <IonCardContent>\n                                <ButtonImage title=\"ระบบน้ำ\" img={Waterdrop} onClick={waterSystemHandler}></ButtonImage>\n                            </IonCardContent>\n                        </IonCard>\n                    </IonCol>\n                    <IonCol size=\"12\" sizeMd=\"6\" sizeLg=\"4\">\n                        <IonCard>\n                            <IonCardContent>\n                                <ButtonImage title=\"ปุ๋ย\" img={Fertilizer} disable></ButtonImage>\n                            </IonCardContent>\n                        </IonCard>\n                    </IonCol>\n                    <IonCol size=\"12\" sizeMd=\"6\" sizeLg=\"4\">\n                        <IonCard>\n                            <IonCardContent>\n                                <ButtonImage title=\"ความชื้นในดิน\" img={Moisture} disable></ButtonImage>\n                            </IonCardContent>\n                        </IonCard>\n                    </IonCol>\n                </IonRow>\n            </IonGrid>\n        </IonContent>\n    </IonPage>\n}\n\nexport default Homepage;","import { IonImg, IonRippleEffect } from '@ionic/react'\nimport React from 'react'\n\nimport \"./ButtonImage.css\"\n\ninterface ButtonImageProps {\n    img: string;\n    title: string;\n    disable?: boolean;\n    onClick?:()=>void\n}\n\n\nconst ButtonImage: React.FC<ButtonImageProps> = ({ img, title ,disable,onClick}) => {\n    \n    return <div style={{ display: \"flex\", alignItems: \"center\", flexDirection: \"column\" }}\n     className={\"ion-activatable ripple-parent \"+(!disable?\"active\":\"\")}\n     onClick={onClick}>\n        {!disable?<IonRippleEffect></IonRippleEffect>:null}\n        {disable?  <div className=\"overlay\"></div>:null}\n        <IonImg src={img} className={\"ion-margin-bottom button_image \"+(disable?\" disable\":\"\")}></IonImg>\n        <h1 className={disable?\"disable\":\"\"}>{title}</h1>\n    </div>\n}\n\nexport default ButtonImage","import React, { useEffect ,useState} from 'react'\n\ninterface TimeAgoProps {\n    date : Date\n}\n\nconst TimeAgo:React.FC<TimeAgoProps> =  ({date})=>{\n    const [secAgo,setSecAgo] = useState(0);\n    useEffect(()=>{\n        setSecAgo(Math.round((Date.now()-date.getTime())/1000))\n        const interval = setInterval(()=>{\n           setSecAgo(Math.round((Date.now()-date.getTime())/1000))\n           \n        },5000)\n        return ()=>{\n           clearInterval(interval)\n        }\n    },[date])\n    return <h2>\n        ข้อความล่าสุด: {secAgo<5?\"ขณะนี้\":secAgo + \" วินาทีที่แล้ว\"}\n    </h2>\n}\n\nexport default TimeAgo","import React ,{useEffect}from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n\n\nimport WatersystemPage from './pages/WatersystemPage/WatersystemPage'\nimport Landing from './pages/LandingPage/LandingPage'\nimport Signup from './pages/SignupPage/SignupPage'\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Theme variables */\nimport './theme/variables.css';\nimport Homepage from './pages/HomePage/HomePage';\n\n\nimport {useDispatch, useSelector} from 'react-redux'\nimport { RootState } from './store';\n\nimport * as authActions from './store/actions/auth'\n\ninterface AuthRouteProps{\n  token:string|null\n  path:string\n  component:React.FC<any>\n}\nconst AuthRoute:React.FC<AuthRouteProps> = ({token,path,component})=>{\n  return <Route path={path} component={token?component:Landing}/>\n}\n\nconst App: React.FC = () => {\n  const token = useSelector((state:RootState)=>state.auth.token)\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(authActions.checkAuthState());\n  }, [dispatch])\n  console.log(token);\n  \n  return <IonApp>\n      <IonReactRouter>\n        <IonRouterOutlet>\n          <Route path=\"/signup\" component={Signup} />\n          <AuthRoute path=\"/home\" component={Homepage} token={token}/>\n          <AuthRoute path=\"/watersystem\" component={WatersystemPage} token={token}/>\n          <Route exact path=\"/\" render={() => <Redirect to=\"/home\" />} />\n\n\n        </IonRouterOutlet>\n      </IonReactRouter>\n    </IonApp>\n\n\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {LOGOUT,AUTH_SUCCESS,AUTH_FAIL} from '../actions/auth';\n\ninterface Action {\n  type: string;\n  [key: string]: any;\n}\n\ninterface AuthState {\n  token: string | null;\n  error:string|null;\n  email:string|null;\n  device_alias:string|null;\n  name:string|null;\n  role:string|null;\n  username:string|null;\n}\n\nconst initialState: AuthState = {\n  token: null,\n  error:null,\n  email:null,\n  device_alias:null,\n  name:null,\n  role:null,\n  username:null\n};\n\nexport default (state = initialState, action: Action) => {\n  switch (action.type) {\n    case AUTH_SUCCESS:\n      return {\n        ...state,\n        token: action.token,\n        email:action.email,\n        device_alias:action.device_alias,\n        name:action.name,\n        role:action.role,\n        username:action.username,\n      };\n    case AUTH_FAIL:\n        return {\n          ...state,\n          error: action.err,\n      };  \n    case LOGOUT:\n      return {\n        ...state,\n        token: null,\n      };\n\n    default:\n      return state;\n  }\n};\n","import {combineReducers, applyMiddleware, createStore} from 'redux';\nimport authReducer from './reducers/auth';\n\nimport ReduxThunk from 'redux-thunk';\nconst reducers = combineReducers({\n  auth: authReducer,\n});\n\nexport type RootState = ReturnType<typeof reducers>\n\nexport default createStore(reducers, applyMiddleware(ReduxThunk));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n\nimport store, { RootState } from \"./store/index\";\n\n\n\nimport { Provider } from 'react-redux'\n\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/waterdrop.1c4093da.svg\";","module.exports = __webpack_public_path__ + \"static/media/fertilizer.1528e696.svg\";","module.exports = __webpack_public_path__ + \"static/media/moisture.5a2daeac.svg\";"],"sourceRoot":""}