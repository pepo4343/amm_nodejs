(this.webpackJsonpAMM_IOT_webapp=this.webpackJsonpAMM_IOT_webapp||[]).push([[1],{103:function(e,t,n){var a={"./ion-action-sheet.entry.js":[173,5],"./ion-alert.entry.js":[174,6],"./ion-app_8.entry.js":[175,7],"./ion-avatar_3.entry.js":[176,18],"./ion-back-button.entry.js":[177,19],"./ion-backdrop.entry.js":[178,43],"./ion-button_2.entry.js":[179,20],"./ion-card_5.entry.js":[180,21],"./ion-checkbox.entry.js":[181,22],"./ion-chip.entry.js":[182,23],"./ion-col_3.entry.js":[183,44],"./ion-datetime_3.entry.js":[184,10],"./ion-fab_3.entry.js":[185,24],"./ion-img.entry.js":[186,45],"./ion-infinite-scroll_2.entry.js":[187,46],"./ion-input.entry.js":[188,25],"./ion-item-option_3.entry.js":[189,26],"./ion-item_8.entry.js":[190,27],"./ion-loading.entry.js":[191,28],"./ion-menu_3.entry.js":[192,29],"./ion-modal.entry.js":[193,8],"./ion-nav_2.entry.js":[194,15],"./ion-popover.entry.js":[195,9],"./ion-progress-bar.entry.js":[196,30],"./ion-radio_2.entry.js":[197,31],"./ion-range.entry.js":[198,32],"./ion-refresher_2.entry.js":[199,11],"./ion-reorder_2.entry.js":[200,17],"./ion-ripple-effect.entry.js":[201,47],"./ion-route_4.entry.js":[202,33],"./ion-searchbar.entry.js":[203,34],"./ion-segment_2.entry.js":[204,35],"./ion-select_3.entry.js":[205,36],"./ion-slide_2.entry.js":[206,48],"./ion-spinner.entry.js":[207,13],"./ion-split-pane.entry.js":[208,49],"./ion-tab-bar_2.entry.js":[209,37],"./ion-tab_2.entry.js":[210,16],"./ion-text.entry.js":[211,38],"./ion-textarea.entry.js":[212,39],"./ion-toast.entry.js":[213,40],"./ion-toggle.entry.js":[214,12],"./ion-virtual-scroll.entry.js":[215,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=103,e.exports=r},124:function(e,t,n){var a={"./ion-icon.entry.js":[219,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=124,e.exports=r},154:function(e,t){},157:function(e,t,n){},158:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),c=n(28),o=n.n(c),i=n(22),u=n(1),s=n(88),m=n(48),E=n(3),p=n.n(E),f=n(10),d=n(42),h=n(9),v=n(18),O=n(47),y=n.n(O),j="http://app.farmmechatronic.org",b=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(j+t,n);case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60);return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},S=function(e,t){var n,a=!0,r=Object(d.a)(e);try{for(r.s();!(n=r.n()).done;){var l=n.value;l[0]<=t[0]&&l[1]>=t[0]&&(a=a&&!1),l[0]<=t[1]&&l[1]>=t[1]&&(a=a&&!1)}}catch(c){r.e(c)}finally{r.f()}return t[0]>=t[1]&&(a=a&&!1),a},I=n(15),N=function(e){var t=e.schedule;return l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex"},className:"ion-text-center ion-margin-top"},l.a.createElement("div",{style:{flex:1}},l.a.createElement("h2",null,"\u0e40\u0e23\u0e34\u0e48\u0e21\u0e17\u0e33\u0e07\u0e32\u0e19")),l.a.createElement("div",{style:{flex:1}},l.a.createElement("h2",null,"\u0e2b\u0e22\u0e38\u0e14\u0e17\u0e33\u0e07\u0e32\u0e19"))),l.a.createElement("div",null,t.map((function(e,t){return l.a.createElement("div",{style:{display:"flex"},key:t,className:"ion-text-center ion-margin-top"},l.a.createElement("div",{style:{flex:1}},l.a.createElement("h1",null,g(e[0]))),l.a.createElement("div",{style:{flex:1}},l.a.createElement("h1",null,g(e[1]))))}))))},k=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(h.a)(c,2),i=o[0],s=o[1],E=Object(r.useState)(null),O=Object(h.a)(E,2),g=O[0],k=O[1],w=Object(r.useState)(null),x=Object(h.a)(w,2),_=x[0],C=x[1],D=Object(r.useState)(!1),T=Object(h.a)(D,2),A=T[0],L=T[1],z=Object(r.useState)(null),R=Object(h.a)(z,2),M=R[0],U=R[1],F=Object(r.useState)([]),G=Object(h.a)(F,2),q=G[0],W=G[1],B=Object(r.useState)((new Date).toISOString()),H=Object(h.a)(B,2),P=H[0],J=H[1],Z=Object(r.useState)((new Date).toISOString()),$=Object(h.a)(Z,2),Y=$[0],K=$[1],Q=Object(v.c)((function(e){return e.auth}));Object(r.useEffect)((function(){y()(j).on(Q.device_alias+"_data",(function(e){var t=e.message.split(","),n="1"===t[0];k(n),C(t[1]),null!==M&&A&&n===M&&L(!1)}))}),[Q,M,A]);var V=Object(r.useCallback)((function(){b("/user/schedule",{headers:{Authorization:"Bearer "+Q.token}}).then((function(e){if(console.log(e),0===e.schedule[0]&&0===e.schedule[1])W([]);else{var t,n=[],a=[],r=!1,l=Object(d.a)(e.schedule);try{for(l.s();!(t=l.n()).done;){var c=t.value;r?(a.push(c),n.push(a),a=[]):a.push(c),r=!r}}catch(o){l.e(o)}finally{l.f()}W(n)}}))}),[Q.token]);Object(r.useEffect)((function(){Q.token&&V()}),[Q.token,V]);var X=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,b("/user/auto/"+(g?"0":"1"),{headers:{Authorization:"Bearer "+Q.token}});case 3:U(!g);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r,l,c,o,i,u,E;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Date(P),n=new Date(Y),a=3600*t.getHours()+60*t.getMinutes(),r=3600*n.getHours()+60*n.getMinutes(),S(q,l=[a,r])){e.next=8;break}return s(!0),e.abrupt("return");case 8:(c=Object(m.a)(q)).push(l),c.sort((function(e,t){return e[0]-t[0]})),o=[],i=Object(d.a)(c);try{for(i.s();!(u=i.n()).done;)E=u.value,o.push(E[0]),o.push(E[1])}catch(p){i.e(p)}finally{i.f()}console.log(o),b("/user/schedule",{method:"POST",headers:{Authorization:"Bearer "+Q.token,"Content-Type":"application/json"},body:JSON.stringify({schedule:o})}),W(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/user/manual/"+t,{headers:{Authorization:"Bearer "+Q.token}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b("/user/schedule",{method:"POST",headers:{Authorization:"Bearer "+Q.token,"Content-Type":"application/json"},body:JSON.stringify({schedule:[0,0]})}),W([]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(q),l.a.createElement(u.u,null,l.a.createElement(u.m,null,l.a.createElement(u.C,{color:"primary"},l.a.createElement(u.e,{slot:"start"},l.a.createElement(u.c,null)),l.a.createElement(u.A,null,"\u0e23\u0e30\u0e1a\u0e1a\u0e19\u0e49\u0e33"))),l.a.createElement(u.j,null,l.a.createElement(u.t,{isOpen:A,onDidDismiss:function(){L(!1),M!==g&&a(!0)},message:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e40\u0e0b\u0e34\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c...",duration:2e4}),l.a.createElement(u.a,{isOpen:n,onDidDismiss:function(){return a(!1)},header:"\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",message:"\u0e01\u0e32\u0e23\u0e2a\u0e48\u0e07\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e25\u0e48\u0e32\u0e0a\u0e49\u0e32",buttons:["\u0e15\u0e01\u0e25\u0e07"]}),l.a.createElement(u.a,{isOpen:i,onDidDismiss:function(){return s(!1)},header:"\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",message:"\u0e42\u0e1b\u0e23\u0e14\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e0a\u0e48\u0e27\u0e07\u0e40\u0e27\u0e25\u0e32",buttons:["\u0e15\u0e01\u0e25\u0e07"]}),l.a.createElement(u.l,null,l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(u.r,null,"Device Alias : ",Q.device_alias),l.a.createElement(u.q,null,l.a.createElement(u.s,null,"\u0e42\u0e2b\u0e21\u0e14 :",function(){switch(g){case null:return l.a.createElement(u.h,{color:"success",style:{opacity:0}},l.a.createElement(u.s,null,"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e17\u0e33\u0e07\u0e32\u0e19..."));case!0:return l.a.createElement(u.h,{color:"success"},l.a.createElement(u.s,null,"AUTO"));case!1:return l.a.createElement(u.h,{color:"tertiary"},l.a.createElement(u.s,null,"MANAUL"))}}()),null===g?l.a.createElement(u.z,null):l.a.createElement(u.B,{checked:g,onClick:X})),!1===g?l.a.createElement(u.q,{className:"ion-text-end"},l.a.createElement(u.d,{color:"primary",size:"default",onClick:function(){return te(1)}},"\u0e40\u0e1b\u0e34\u0e14\u0e1b\u0e31\u0e49\u0e21"),l.a.createElement(u.d,{color:"medium",size:"default",onClick:function(){return te(0)}}," \u0e1b\u0e34\u0e14\u0e1b\u0e31\u0e49\u0e21")):null,l.a.createElement(u.q,{class:"ion-margin-bottom"},l.a.createElement(u.s,null,"\u0e1b\u0e31\u0e49\u0e21 :",function(){switch(_){case null:return l.a.createElement(u.h,{color:"success",style:{opacity:0}},l.a.createElement(u.s,null,"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e17\u0e33\u0e07\u0e32\u0e19..."));case"1":return l.a.createElement(u.h,{color:"success"},l.a.createElement(u.s,null,"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e17\u0e33\u0e07\u0e32\u0e19..."));case"0":return l.a.createElement(u.h,{color:"medium"},l.a.createElement(u.s,null,"\u0e44\u0e21\u0e48\u0e17\u0e33\u0e07\u0e32\u0e19"))}}())),l.a.createElement(u.r,null,"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e01\u0e32\u0e23\u0e17\u0e33\u0e07\u0e32\u0e19\u0e2d\u0e31\u0e15\u0e42\u0e19\u0e21\u0e31\u0e15\u0e34"),l.a.createElement(N,{schedule:q}),l.a.createElement("div",{className:"ion-text-end ion-margin-top",onClick:ne},l.a.createElement(u.d,{size:"small",color:"medium"},l.a.createElement(u.n,{slot:"icon-only",icon:I.p}))),l.a.createElement(u.r,{className:"ion-margin-top"},"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e27\u0e25\u0e32\u0e01\u0e32\u0e23\u0e17\u0e33\u0e07\u0e32\u0e19"),l.a.createElement("div",{className:"ion-text-end ion-margin-top"},l.a.createElement(u.q,null,l.a.createElement(u.s,null,"\u0e40\u0e27\u0e25\u0e32\u0e40\u0e23\u0e34\u0e48\u0e21\u0e17\u0e33\u0e07\u0e32\u0e19"),l.a.createElement(u.k,{displayFormat:"HH:mm",value:P,onIonChange:function(e){return J(e.detail.value)}})),l.a.createElement(u.q,null,l.a.createElement(u.s,null,"\u0e40\u0e27\u0e25\u0e32\u0e2b\u0e22\u0e38\u0e14\u0e17\u0e33\u0e07\u0e32\u0e19"),l.a.createElement(u.k,{displayFormat:"HH:mm",value:Y,onIonChange:function(e){return K(e.detail.value)}})),l.a.createElement(u.d,{className:"ion-margin-top",onClick:ee},l.a.createElement(u.n,{slot:"start",icon:I.a}),"\u0e40\u0e1e\u0e34\u0e48\u0e21")))))))))},w=(n(157),function(e,t,n,a,r,l){return{type:"AUTH_SUCCESS",token:e,email:t,device_alias:n,name:a,role:r,username:l}}),x=function(e,t){return function(){var n=Object(f.a)(p.a.mark((function n(a){var r,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});case 3:return r=n.sent,console.log(r),l=new Date((new Date).getTime()+1e3*r.expiresIn),localStorage.setItem("token",r.token),localStorage.setItem("expirationDate",l.toString()),localStorage.setItem("email",r.email),localStorage.setItem("device_alias",r.device_alias),localStorage.setItem("name",r.name),localStorage.setItem("role",r.role),localStorage.setItem("username",r.username),a(w(r.token,r.email,r.device_alias,r.name,r.role,r.username)),n.abrupt("return",r);case 17:throw n.prev=17,n.t0=n.catch(0),console.log(n.t0),n.t0;case 21:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},_=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("email"),localStorage.removeItem("device_alias"),localStorage.removeItem("name"),localStorage.removeItem("role"),localStorage.removeItem("username"),{type:"LOGOUT"}};!function(e){e[e.UNDETERMINE=0]="UNDETERMINE",e[e.WAITING=1]="WAITING",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR"}(a||(a={}));var C={httpStatus:a.UNDETERMINE},D=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SEND":return{httpStatus:a.WAITING};case"RESPONSE":return{httpStatus:a.SUCCESS};case"ERROR":return{httpStatus:a.ERROR};case"CLEAR":return C;default:throw new Error("Should not be reached!")}},T=function(){var e=Object(r.useReducer)(D,C),t=Object(h.a)(e,2),n=t[0],a=t[1],l=Object(v.b)(),c=Object(r.useCallback)(function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"SEND"}),e.prev=1,e.next=4,l(t);case 4:return n=e.sent,a({type:"RESPONSE"}),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),a({type:"ERROR"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,l]);return{httpState:n.httpStatus,dispatch:c}},A=function(e){var t=e.history,n=T(),c=n.dispatch,o=n.httpState,i=Object(r.useState)(""),s=Object(h.a)(i,2),m=s[0],E=s[1],d=Object(r.useState)(""),v=Object(h.a)(d,2),O=v[0],y=v[1],j=Object(r.useCallback)((function(e){e.preventDefault(),t.push("/signup")}),[t]),b=Object(r.useCallback)(function(){var e=Object(f.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),E(""),y(""),e.next=5,c(x(m||"",O||""));case 5:"Login Successful"===e.sent.message&&t.replace("/home");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,m,O,t]);return l.a.createElement(u.u,null,l.a.createElement(u.j,null,l.a.createElement(u.m,null,l.a.createElement(u.C,{color:"primary"},l.a.createElement(u.A,null,"AMM"))),l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(u.t,{isOpen:o===a.WAITING,onDidDismiss:function(){},message:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e40\u0e0b\u0e34\u0e1f\u0e40\u0e27\u0e2d\u0e23\u0e4c...",duration:5e3}),l.a.createElement(u.l,null,l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49",type:"text",value:m,onIonChange:function(e){return E(e.detail.value)}})))),l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"\u0e23\u0e2b\u0e31\u0e2a\u0e1c\u0e48\u0e32\u0e19",type:"password",value:O,onIonChange:function(e){return y(e.detail.value)}})))),l.a.createElement(u.y,{class:"ion-justify-content-center ion-margin-top"},l.a.createElement(u.i,{className:"ion-text-center ion-no-padding"},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},l.a.createElement(u.d,{color:"primary",className:"ion-no-margin",onClick:b},"\u0e25\u0e07\u0e0a\u0e37\u0e48\u0e2d\u0e40\u0e02\u0e49\u0e32\u0e43\u0e0a\u0e49"),l.a.createElement(u.d,{fill:"clear",color:"medium",className:"ion-no-margin",onClick:j},"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19")))))))))};n(158);function L(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)||(alert("You have entered an invalid email address!"),!1)}var z,R=function(e){var t=e.history,n=Object(r.useState)(!1),a=Object(h.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),s=Object(h.a)(i,2),m=s[0],E=s[1],d=Object(r.useState)(""),v=Object(h.a)(d,2),O=v[0],y=v[1],j=Object(r.useState)(""),g=Object(h.a)(j,2),S=g[0],I=g[1],N=Object(r.useState)(""),k=Object(h.a)(N,2),w=k[0],x=k[1],_=Object(r.useState)(""),C=Object(h.a)(_,2),D=C[0],T=C[1],A=function(){var e=Object(f.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!0,m&&O&&S&&w&&D||(n=n&&!1),L(w)||(n=n&&!1),n){e.next=6;break}return o(!0),e.abrupt("return");case 6:return e.prev=6,e.next=9,b("/user/registor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m,password:O,name:S,role:"standart",email:w,device_alias:D})});case 9:e.sent.message||t.goBack(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(u.u,null,l.a.createElement(u.m,null,l.a.createElement(u.C,{color:"primary"},l.a.createElement(u.e,{slot:"start"},l.a.createElement(u.c,null)),l.a.createElement(u.A,null,"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19"))),l.a.createElement(u.j,null,l.a.createElement(u.a,{isOpen:c,onDidDismiss:function(){return o(!1)},header:"\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",message:"\u0e42\u0e1b\u0e23\u0e14\u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25",buttons:["\u0e15\u0e01\u0e25\u0e07"]}),l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(u.l,null,l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e08\u0e23\u0e34\u0e07-\u0e19\u0e32\u0e21\u0e2a\u0e01\u0e38\u0e25",type:"text",value:S,onIonChange:function(e){return I(e.detail.value)}})))),l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"Username",type:"text",value:m,onIonChange:function(e){return E(e.detail.value)}})))),l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"Password",type:"password",value:O,onIonChange:function(e){return y(e.detail.value)}})))),l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"Email",type:"text",value:w,onIonChange:function(e){return x(e.detail.value)}})))),l.a.createElement(u.y,null,l.a.createElement(u.i,null,l.a.createElement(u.q,null,l.a.createElement(u.p,{placeholder:"Device Alias",type:"text",value:D,onIonChange:function(e){return T(e.detail.value)}})))),l.a.createElement(u.y,{class:"ion-justify-content-center ion-margin-top"},l.a.createElement(u.i,{className:"ion-text-center ion-no-padding"},l.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},l.a.createElement(u.d,{className:"ion-no-margin",onClick:A},"\u0e25\u0e07\u0e17\u0e30\u0e40\u0e1a\u0e35\u0e22\u0e19")))))))))},M=(n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(90)),U=n.n(M),F=n(91),G=n.n(F),q=n(92),W=n.n(q),B=(n(170),function(e){var t=e.img,n=e.title,a=e.disable,r=e.onClick;return l.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},className:"ion-activatable ripple-parent "+(a?"":"active"),onClick:r},a?null:l.a.createElement(u.v,null),a?l.a.createElement("div",{className:"overlay"}):null,l.a.createElement(u.o,{src:t,className:"ion-margin-bottom button_image "+(a?" disable":"")}),l.a.createElement("h1",{className:a?"disable":""},n))}),H=function(e){var t=e.date,n=Object(r.useState)(0),a=Object(h.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){o(Math.round((Date.now()-t.getTime())/1e3));var e=setInterval((function(){o(Math.round((Date.now()-t.getTime())/1e3))}),5e3);return function(){clearInterval(e)}}),[t]),l.a.createElement("h2",null,"\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e25\u0e48\u0e32\u0e2a\u0e38\u0e14: ",c<5?"\u0e02\u0e13\u0e30\u0e19\u0e35\u0e49":c+" \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27")};!function(e){e[e.WAITING=0]="WAITING",e[e.TOOLONG=1]="TOOLONG",e[e.ONLINE=2]="ONLINE",e[e.OFFLINE=3]="OFFLINE"}(z||(z={}));var P=function(e){var t=e.history,n=Object(v.c)((function(e){return e.auth})),a=Object(r.useState)(z.WAITING),c=Object(h.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)(null),m=Object(h.a)(s,2),E=m[0],p=m[1],f=Object(v.b)();Object(r.useEffect)((function(){var e=y()(j);console.log(n.device_alias+"_status"),e.on(n.device_alias+"_status",(function(e){p(new Date)}))}),[n]),Object(r.useEffect)((function(){var e=0,t=setInterval((function(){null===E?++e>=20?i(z.OFFLINE):e>=10&&i(z.TOOLONG):(Date.now()-E.getTime())/1e3>=20?i(z.OFFLINE):(Date.now()-E.getTime())/1e3>=10?i(z.TOOLONG):i(z.ONLINE)}),1e3);return function(){clearInterval(t)}}),[E]);return l.a.createElement(u.u,null,l.a.createElement(u.m,null,l.a.createElement(u.C,{color:"primary"},l.a.createElement(u.e,{slot:"start"},l.a.createElement(u.c,null)),l.a.createElement(u.A,null,"\u0e2b\u0e19\u0e49\u0e32\u0e2b\u0e25\u0e31\u0e01"),l.a.createElement(u.e,{slot:"end"},l.a.createElement(u.d,{onClick:function(){f(_()),t.replace("/")}},l.a.createElement(u.n,{slot:"icon-only",icon:I.i}))))),l.a.createElement(u.j,null,l.a.createElement(u.l,null,l.a.createElement(u.y,null,l.a.createElement(u.i,{size:"12"},l.a.createElement(u.f,{color:function(){switch(o){case z.WAITING:return"";case z.TOOLONG:return"warning";case z.OFFLINE:return"danger";case z.ONLINE:return"success"}}()},l.a.createElement(u.g,null,l.a.createElement("h1",null,"Device Alias: ",l.a.createElement("b",null,n.device_alias)),l.a.createElement("div",{style:{display:"flex"}}," ",l.a.createElement("h1",null,"Status: ")," ",function(){switch(o){case z.WAITING:return l.a.createElement(u.z,null);case z.TOOLONG:return l.a.createElement("h1",null,l.a.createElement("b",null,"TOO LONG"));case z.OFFLINE:return l.a.createElement("h1",null,l.a.createElement("b",null,"OFFLINE"));case z.ONLINE:return l.a.createElement("h1",null,l.a.createElement("b",null,"ONLINE"))}}()),E?l.a.createElement(H,{date:E}):l.a.createElement("p",null,"\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e25\u0e48\u0e32\u0e2a\u0e38\u0e14: - \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27"))))),l.a.createElement(u.y,null,l.a.createElement(u.i,{size:"12",sizeMd:"6",sizeLg:"4",className:"ion-text-center"},l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(B,{title:"\u0e23\u0e30\u0e1a\u0e1a\u0e19\u0e49\u0e33",img:U.a,onClick:function(){t.push("/watersystem")}})))),l.a.createElement(u.i,{size:"12",sizeMd:"6",sizeLg:"4"},l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(B,{title:"\u0e1b\u0e38\u0e4b\u0e22",img:G.a,disable:!0})))),l.a.createElement(u.i,{size:"12",sizeMd:"6",sizeLg:"4"},l.a.createElement(u.f,null,l.a.createElement(u.g,null,l.a.createElement(B,{title:"\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e37\u0e49\u0e19\u0e43\u0e19\u0e14\u0e34\u0e19",img:W.a,disable:!0}))))))))},J=function(e){var t=e.token,n=e.path,a=e.component;return l.a.createElement(i.b,{path:n,component:t?a:A})},Z=function(){var e=Object(v.c)((function(e){return e.auth.token})),t=Object(v.b)();return Object(r.useEffect)((function(){t((function(e){var t=localStorage.getItem("token");if(console.log("token",t),t)if(new Date(localStorage.getItem("expirationDate"))<new Date)e(_());else{var n=localStorage.getItem("email"),a=localStorage.getItem("device_alias"),r=localStorage.getItem("name"),l=localStorage.getItem("role"),c=localStorage.getItem("username");e(w(t,n,a,r,l,c))}else e(_())}))}),[t]),console.log(e),l.a.createElement(u.b,null,l.a.createElement(s.a,null,l.a.createElement(u.x,null,l.a.createElement(i.b,{path:"/signup",component:R}),l.a.createElement(J,{path:"/home",component:P,token:e}),l.a.createElement(J,{path:"/watersystem",component:k,token:e}),l.a.createElement(i.b,{exact:!0,path:"/",render:function(){return l.a.createElement(i.a,{to:"/home"})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(35),Y=n(29),K={token:null,error:null,email:null,device_alias:null,name:null,role:null,username:null},Q=n(93),V=Object($.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_SUCCESS":return Object(Y.a)(Object(Y.a)({},e),{},{token:t.token,email:t.email,device_alias:t.device_alias,name:t.name,role:t.role,username:t.username});case"AUTH_FAIL":return Object(Y.a)(Object(Y.a)({},e),{},{error:t.err});case"LOGOUT":return Object(Y.a)(Object(Y.a)({},e),{},{token:null});default:return e}}}),X=Object($.d)(V,Object($.a)(Q.a));o.a.render(l.a.createElement(v.a,{store:X},l.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,n){e.exports=n.p+"static/media/waterdrop.1c4093da.svg"},91:function(e,t,n){e.exports=n.p+"static/media/fertilizer.1528e696.svg"},92:function(e,t,n){e.exports=n.p+"static/media/moisture.5a2daeac.svg"},97:function(e,t,n){e.exports=n(171)}},[[97,3,4]]]);
//# sourceMappingURL=main.1fcb4e01.chunk.js.map